{"version":3,"sources":["../src/js/team.js"],"names":["currentTop","el","sectionTeamArrowPrevious","sectionTeamArrowNext","teamOffsetTop","currentOffsetTop","teamHeight","sectionTeam","windowOffsetTop","window","windowHeight","windowWidth","headerHeight","header","firstHook","secondHook","ShowArrows","HideArrows","document","CheckTeamArrows","xhr","data","data_team_len","resolve","rootUrl","i","person_i","string","person","PersonInsertText","sectionTeamPhoto","LoadPerson","LoadPreviousPerson","LoadNextPerson","LoadPeopleJSON","PreloadTeamPhotos"],"mappings":"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","sourcesContent":["\r\n/* Arrows */\r\n\r\nfunction currentOffsetTop(el) {\r\n  let currentTop = 0;\r\n  if (el.offsetParent) {\r\n    do {\r\n      currentTop += el.offsetTop;\r\n    } while (el = el.offsetParent);\r\n    return currentTop;\r\n  }\r\n  return undefined;\r\n}\r\n\r\nfunction ShowArrows() {\r\n  sectionTeamArrowPrevious.classList.add(arrow_visible_class);\r\n  sectionTeamArrowNext.classList.add(arrow_visible_class);\r\n}\r\n\r\nfunction HideArrows() {\r\n  sectionTeamArrowPrevious.classList.remove(arrow_visible_class);\r\n  sectionTeamArrowNext.classList.remove(arrow_visible_class);\r\n}\r\n\r\nfunction CheckTeamArrows() {\r\n  let teamOffsetTop = currentOffsetTop(sectionTeam);\r\n  let teamHeight    = sectionTeam.offsetHeight;\r\n\r\n  let windowOffsetTop = window.pageYOffset;\r\n  let windowHeight    = window.innerHeight;\r\n  let windowWidth     = window.innerWidth;\r\n\r\n  let headerHeight = header.offsetHeight;\r\n\r\n  // firstHook: when scrolled into view (+ additional fraction of height)\r\n  let firstHook;\r\n  // secondHook: when scrolled out of the view (- additional fraction of height)\r\n  let secondHook;\r\n\r\n  if(windowWidth < 780) {\r\n    // mobile\r\n    firstHook  = teamOffsetTop - windowHeight + (teamHeight/4)*3; // top 3/4 of section must be visible\r\n    secondHook = teamOffsetTop                + (teamHeight/4);   // top 1/4 must be hidden\r\n  } else {\r\n    // pc (additional windowHeight due to the banner getting fixed in place)\r\n    firstHook  = teamOffsetTop                + (teamHeight/4)*3; // top 3/4 of section must be visible\r\n    secondHook = teamOffsetTop + windowHeight;                    // top must at least start hiding\r\n  }\r\n\r\n  // when view is between both hooks\r\n  if( (windowOffsetTop > firstHook) && (windowOffsetTop < secondHook) ) {\r\n    ShowArrows();\r\n  } else {\r\n    HideArrows();\r\n  }\r\n}\r\n\r\ndocument.addEventListener('scroll', function() {\r\n  CheckTeamArrows();\r\n});\r\ndocument.addEventListener('resize', function() {\r\n  CheckTeamArrows();\r\n});\r\n\r\n\r\n\r\n\r\n/* Load People JSON */\r\n\r\nlet data;\r\nlet data_team_len;\r\n\r\nfunction LoadPeopleJSON() {\r\n  return new Promise((resolve, reject) => {\r\n\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.responseType = 'json'\r\n    xhr.addEventListener('load', function() {\r\n\r\n      if (xhr.status === 200) {\r\n        data = xhr.response;\r\n        data_team_len = data.team.length;\r\n        resolve();\r\n      }\r\n\r\n    });\r\n\r\n    xhr.open('POST', rootUrl + 'src/team.json', true);\r\n    xhr.send();\r\n\r\n  });\r\n}\r\n\r\n\r\nfunction PreloadTeamPhotos() {\r\n  for(let i = 0; i < data_team_len; i++) {\r\n    new Image().src = rootUrl + data.team[i].photo;\r\n  }\r\n}\r\n\r\n\r\n/* Toggle Person */\r\n\r\nlet person_i = 0; // First person in the JSON array\r\n\r\nfunction PersonInsertText(el, string) {\r\n  if(string == '') {\r\n    el.innerHTML = '';\r\n  } else if(el == sectionTeamText) {\r\n    el.innerHTML = '\"' + string + '\"';\r\n  } else {\r\n    el.innerHTML = string;\r\n  }\r\n}\r\nfunction LoadPerson() {\r\n  let person = data.team[person_i];\r\n  PersonInsertText(sectionTeamName,    person.name);\r\n  PersonInsertText(sectionTeamRole,    person.role);\r\n  PersonInsertText(sectionTeamContact, person.contact);\r\n  PersonInsertText(sectionTeamText,    person.text);\r\n  sectionTeamPhoto.src = person.photo;\r\n}\r\n\r\nfunction LoadPreviousPerson() {\r\n  if((person_i - 1) < 0) {\r\n    person_i = data_team_len - 1;\r\n  } else {\r\n    person_i -= 1;\r\n  }\r\n  LoadPerson();\r\n}\r\n\r\nfunction LoadNextPerson() {\r\n  if( (person_i + 1) == data_team_len ) {\r\n    person_i = 0;\r\n  } else {\r\n    person_i += 1;\r\n  }\r\n  LoadPerson();\r\n}\r\n\r\nsectionTeamArrowPrevious.addEventListener('click', function() {\r\n  LoadPreviousPerson();\r\n});\r\nsectionTeamArrowNext.addEventListener('click', function() {\r\n  LoadNextPerson();\r\n});\r\n\r\n\r\n// When site loads, load first person\r\nwindow.addEventListener('load', function() {\r\n  LoadPeopleJSON().then(res => {\r\n    PreloadTeamPhotos();\r\n    LoadPerson(); // First from JSON array will be loaded\r\n  });\r\n});\r\n"],"file":"team.js"}