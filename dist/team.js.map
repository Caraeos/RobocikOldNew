{"version":3,"sources":["../src/js/team.js"],"names":["teamData","teamData_len","LoadDataJSON","Promise","resolve","reject","xhr","XMLHttpRequest","responseType","addEventListener","status","response","team","length","open","rootUrl","send","PreloadTeamPhotos","i","Image","src","photo","sliderElPrevious","sliderElMain","sliderElNext","sliderGetCurrentElements","document","querySelectorAll","sliderRepositionShifted","el","forEach","classList","add","contains","style","transform","offsetHeight","remove","sliderSlide","direction","sliderEl","translateX","translate","sliderMemberInsertData","data","innerHTML","sliderText","string","sliderImg","sliderLoadMember","el_type","member","member_i","name","sliderName","role","sliderRole","contact","sliderContact","text","sliderChooseMember","sliderPrevious","sliderReloadShiftedMember","sliderNext","sliderArrowPrevious","sliderArrowNext","window","then","res","pb_run","pb_pause"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\n/* Load Team Data from src/team.json */\r\n\r\nlet teamData; // full data from the sever\r\nlet teamData_len; // amount of team members\r\n\r\nfunction LoadDataJSON() {\r\n  return new Promise((resolve, reject) => {\r\n\r\n    // AJAX call for JSON data from the server\r\n\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.responseType = 'json';\r\n    xhr.addEventListener('load', function () {\r\n\r\n      if (xhr.status === 200) {\r\n        teamData = xhr.response;\r\n        teamData_len = teamData.team.length;\r\n        resolve();\r\n      }\r\n\r\n    });\r\n\r\n    xhr.open('POST', rootUrl + 'src/team.json', true);\r\n    xhr.send();\r\n\r\n  });\r\n}\r\n\r\nfunction PreloadTeamPhotos() {\r\n  // preload photos to browser memory for faster loading when switching between people\r\n  for(let i = 0; i < teamData_len; i++) {\r\n    new Image().src = rootUrl + teamData.team[i].photo;\r\n  }\r\n}\r\n\r\n\r\n\r\nlet sliderElPrevious;\r\nlet sliderElMain;\r\nlet sliderElNext;\r\nfunction sliderGetCurrentElements() {\r\n  sliderElPrevious = document.querySelectorAll('.slider__el--previous');\r\n  sliderElMain     = document.querySelectorAll('.slider__el--main');\r\n  sliderElNext     = document.querySelectorAll('.slider__el--next');\r\n}\r\n\r\nfunction sliderRepositionShifted(el) {\r\n  sliderGetCurrentElements();\r\n  el.forEach(function(el) {\r\n    // turn off transitions\r\n    el.classList.add('slider__el--no-transition');\r\n\r\n    // change reposition to left or right\r\n    if(el.classList.contains('slider__el--previous')) {\r\n      el.style.transform = el.style.transform = 'translateX(100%)';\r\n    } else if (el.classList.contains('slider__el--next')) {\r\n      el.style.transform = el.style.transform = 'translateX(-100%)';\r\n    }\r\n\r\n    // turn on transitions\r\n    el.offsetHeight; // force a reflow\r\n    el.classList.remove('slider__el--no-transition');\r\n  });\r\n}\r\n\r\nfunction sliderSlide(direction) {\r\n  // before moving               [-100%] | [  0  ] | [ 100% ]\r\n  // direction previous                  | [  0  ] | [ 100% ] [ 200% ]\r\n  // direction next      [-200%] [-100%] | [  0  ] |\r\n\r\n  sliderEl.forEach(function(el) {\r\n\r\n    let translateX = el.style.translate;\r\n\r\n    if (direction === 'previous') {\r\n      el.style.transform = 'translateX('+translateX+100+'%)';\r\n    } else if (direction === 'next') {\r\n      el.style.transform = 'translateX('+translateX+100+'%)';\r\n    }\r\n\r\n  });\r\n}\r\n\r\n// pseudo setter for HTML text elements\r\nfunction sliderMemberInsertData(data, el) {\r\n  if(data === '') { // if no data\r\n    el.innerHTML = '<span style=\"opacity:0; cursor:default\">Co ty tu robisz potężny czarodzieju</span>';\r\n  } else {\r\n\r\n    if(el === sliderText) {\r\n\r\n      if(string.length > 130) {\r\n        el.innerHTML = 'ERROR: THE TEXT WAS TOO LONG';\r\n      } else {\r\n        el.innerHTML = '\"' + data + '\"';\r\n      }\r\n\r\n    } else if(el === sliderImg) {\r\n\r\n      el.src = data;\r\n\r\n    } else {\r\n\r\n      el.innerHTML = data;\r\n\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction sliderLoadMember(el_type) {\r\n  let member = teamData.team[member_i];\r\n  if(el_type === 'previous') {\r\n\r\n  }\r\n  sliderMemberInsertData(member.name,    sliderName);\r\n  sliderMemberInsertData(member.role,    sliderRole);\r\n  sliderMemberInsertData(member.contact, sliderContact);\r\n  sliderMemberInsertData(member.text,    sliderText);\r\n  sliderMemberInsertData(member.photo,   sliderImg);\r\n}\r\n// TODO: its fucked up because you have to choose elements with\r\n//  both classes: ex. slider__name and slider__el--previous\r\n\r\nlet member_i = 0; // first person in the JSON array\r\nfunction sliderChooseMember(direction) {\r\n  if (direction === 'previous') {\r\n\r\n    if ((member_i - 1) < 0) {\r\n      // if out of range then take the last person\r\n      member_i = teamData_len - 1;\r\n    } else {\r\n      member_i -= 1;\r\n    }\r\n\r\n  } else {\r\n\r\n    if( (member_i + 1) === teamData_len ) {\r\n      // if out of range then take the first person\r\n      member_i = 0;\r\n    } else {\r\n      member_i += 1;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction sliderPrevious() {\r\n  sliderSlide('previous');\r\n  sliderRepositionShifted(sliderElNext);\r\n  sliderChooseMember('previous');\r\n  sliderReloadShiftedMember();\r\n  // change position of shifted el\r\n  // load person into shifted el\r\n  // change positional classes\r\n}\r\n\r\nfunction sliderNext() {\r\n  sliderSlide('next');\r\n  sliderRepositionShifted(sliderElPrevious);\r\n  sliderRepositionShifted(sliderElNext);\r\n  sliderReloadShiftedMember();\r\n}\r\n\r\n\r\n\r\n\r\n\r\nsliderArrowPrevious.addEventListener('click', function() {\r\n  sliderPrevious();\r\n});\r\nsliderArrowNext.addEventListener('click', function() {\r\n  sliderNext();\r\n});\r\n\r\n\r\n// When site loads, load first person\r\nwindow.addEventListener('load', function() {\r\n  LoadDataJSON().then(res => {\r\n    PreloadTeamPhotos();\r\n    sliderNext(); // first from JSON array will be loaded\r\n  });\r\n\r\n  pb_run(sliderNext); // run the progressbar from progressbar.js\r\n});\r\n\r\n\r\n/* ProgressBar */\r\n\r\nsliderArrowPrevious.addEventListener('mouseover', function() {\r\n  pb_pause();\r\n});\r\nsliderArrowNext.addEventListener('mouseover', function() {\r\n  pb_pause();\r\n});\r\nsliderArrowPrevious.addEventListener('mouseout', function() {\r\n  pb_run(sliderNext);\r\n});\r\nsliderArrowNext.addEventListener('mouseout', function() {\r\n  pb_run(sliderNext);\r\n});\r\n"],"file":"team.js"}