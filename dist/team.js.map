{"version":3,"sources":["../src/js/team.js"],"names":["currentOffsetTop","el","currentTop","offsetParent","offsetTop","undefined","ShowArrows","sectionTeamArrowPrevious","classList","add","arrow_visible_class","sectionTeamArrowNext","HideArrows","remove","CheckTeamArrows","teamOffsetTop","sectionTeam","teamHeight","offsetHeight","windowOffsetTop","window","pageYOffset","windowHeight","innerHeight","windowWidth","innerWidth","firstHook","secondHook","document","addEventListener","data","data_team_len","LoadPeopleJSON","Promise","resolve","reject","xhr","XMLHttpRequest","responseType","status","response","team","length","open","rootUrl","send","PreloadTeamPhotos","i","Image","src","photo","person_i","PersonInsertText","string","innerHTML","sectionTeamText","LoadPerson","person","sectionTeamName","name","sectionTeamRole","role","sectionTeamContact","contact","text","sectionTeamPhoto","LoadPreviousPerson","LoadNextPerson","then","res","pb_run","pb_pause"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n/* Arrows */\r\n\r\n// find an element's offset from top of the screen\r\nfunction currentOffsetTop(el) {\r\n  let currentTop = 0;\r\n  if (el.offsetParent) {\r\n    do {\r\n      currentTop += el.offsetTop;\r\n    } while (el = el.offsetParent);\r\n    return currentTop;\r\n  }\r\n  return undefined;\r\n}\r\n\r\nfunction ShowArrows() {\r\n  sectionTeamArrowPrevious.classList.add(arrow_visible_class);\r\n  sectionTeamArrowNext.classList.add(arrow_visible_class);\r\n}\r\n\r\nfunction HideArrows() {\r\n  sectionTeamArrowPrevious.classList.remove(arrow_visible_class);\r\n  sectionTeamArrowNext.classList.remove(arrow_visible_class);\r\n}\r\n\r\n// check how far the user scrolled and show or hide arrows\r\nfunction CheckTeamArrows() {\r\n  let teamOffsetTop = currentOffsetTop(sectionTeam);\r\n  let teamHeight    = sectionTeam.offsetHeight;\r\n\r\n  let windowOffsetTop = window.pageYOffset;\r\n  let windowHeight    = window.innerHeight;\r\n  let windowWidth     = window.innerWidth;\r\n\r\n  // firstHook: when scrolled into view (+ additional fraction of height)\r\n  let firstHook;\r\n  // secondHook: when scrolled out of the view (- additional fraction of height)\r\n  let secondHook;\r\n\r\n  if(windowWidth < 780) {\r\n    // mobile\r\n    firstHook  = teamOffsetTop - windowHeight + (teamHeight/4)*3; // top 3/4 of section must be visible\r\n    secondHook = teamOffsetTop                + (teamHeight/4);   // top 1/4 must be hidden\r\n  } else {\r\n    // pc (additional windowHeight due to the banner getting fixed in place)\r\n    firstHook  = teamOffsetTop                + (teamHeight/4)*3; // top 3/4 of section must be visible\r\n    secondHook = teamOffsetTop + windowHeight;                    // top must at least start hiding\r\n  }\r\n\r\n  // when view is between both hooks\r\n  if( (windowOffsetTop > firstHook) && (windowOffsetTop < secondHook) ) {\r\n    ShowArrows();\r\n  } else {\r\n    HideArrows();\r\n  }\r\n}\r\n\r\ndocument.addEventListener('scroll', function() {\r\n  CheckTeamArrows();\r\n});\r\ndocument.addEventListener('resize', function() {\r\n  CheckTeamArrows();\r\n});\r\n\r\n\r\n\r\n\r\n/* Load People JSON */\r\n\r\nlet data; // full data from the sever\r\nlet data_team_len; // amount of team members\r\n\r\nfunction LoadPeopleJSON() {\r\n  return new Promise((resolve, reject) => {\r\n\r\n    // AJAX call for JSON data from the server\r\n\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.responseType = 'json'\r\n    xhr.addEventListener('load', function() {\r\n\r\n      if (xhr.status === 200) {\r\n        data = xhr.response;\r\n        data_team_len = data.team.length;\r\n        resolve();\r\n      }\r\n\r\n    });\r\n\r\n    xhr.open('POST', rootUrl + 'src/team.json', true);\r\n    xhr.send();\r\n\r\n  });\r\n}\r\n\r\n\r\nfunction PreloadTeamPhotos() {\r\n  // preload photos to browser memory for faster loading when switching between people\r\n  for(let i = 0; i < data_team_len; i++) {\r\n    new Image().src = rootUrl + data.team[i].photo;\r\n  }\r\n}\r\n\r\n\r\n/* Toggle Person */\r\n\r\nlet person_i = 0; // first person in the JSON array\r\n\r\n// pseudo setter for HTML text elements\r\nfunction PersonInsertText(el, string) {\r\n  if(string == '') {\r\n\r\n    el.innerHTML = '<span style=\"opacity:0; cursor:default\">Co ty tu robisz potężny czarodzieju</span>';\r\n\r\n  } else if(el == sectionTeamText) {\r\n\r\n    if(string.length > 130) {\r\n      el.innerHTML = 'ERROR: THE TEXT WAS TOO LONG';\r\n    } else {\r\n      el.innerHTML = '\"' + string + '\"';\r\n    }\r\n\r\n  } else {\r\n\r\n    el.innerHTML = string;\r\n\r\n  }\r\n}\r\n\r\nfunction LoadPerson() {\r\n  let person = data.team[person_i];\r\n  PersonInsertText(sectionTeamName,    person.name);\r\n  PersonInsertText(sectionTeamRole,    person.role);\r\n  PersonInsertText(sectionTeamContact, person.contact);\r\n  PersonInsertText(sectionTeamText,    person.text);\r\n  sectionTeamPhoto.src = person.photo;\r\n}\r\n\r\nfunction LoadPreviousPerson() {\r\n  if((person_i - 1) < 0) {\r\n    // if out of range then take the last person\r\n    person_i = data_team_len - 1;\r\n  } else {\r\n    person_i -= 1;\r\n  }\r\n  LoadPerson();\r\n}\r\n\r\nfunction LoadNextPerson() {\r\n  if( (person_i + 1) == data_team_len ) {\r\n    // if out of range then take the first person\r\n    person_i = 0;\r\n  } else {\r\n    person_i += 1;\r\n  }\r\n  LoadPerson();\r\n}\r\n\r\nsectionTeamArrowPrevious.addEventListener('click', function() {\r\n  LoadPreviousPerson();\r\n});\r\nsectionTeamArrowNext.addEventListener('click', function() {\r\n  LoadNextPerson();\r\n});\r\n\r\n\r\n// When site loads, load first person\r\nwindow.addEventListener('load', function() {\r\n  LoadPeopleJSON().then(res => {\r\n    PreloadTeamPhotos();\r\n    LoadPerson(); // first from JSON array will be loaded\r\n  });\r\n\r\n  pb_run(LoadNextPerson); // run the progressbar from progressbar.js\r\n});\r\n\r\n\r\n/* ProgressBar */\r\n\r\nsectionTeamArrowPrevious.addEventListener('mouseover', function() {\r\n  pb_pause();\r\n});\r\nsectionTeamArrowNext.addEventListener('mouseover', function() {\r\n  pb_pause();\r\n});\r\nsectionTeamArrowPrevious.addEventListener('mouseout', function() {\r\n  pb_run(LoadNextPerson);\r\n});\r\nsectionTeamArrowNext.addEventListener('mouseout', function() {\r\n  pb_run(LoadNextPerson);\r\n});\r\n"],"file":"team.js"}